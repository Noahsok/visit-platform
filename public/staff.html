<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Visit — Staff</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Playfair Display', Georgia, serif;
            background: #0a0a0a;
            color: #e8e4df;
            min-height: 100vh;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid #1a1a1a;
            background: #0a0a0a;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .ops-back {
            color: #6a6560;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .ops-back:hover {
            color: #a09a92;
        }

        .logo img {
            height: 28px;
            filter: invert(1);
        }

        .live-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #6a6560;
            font-size: 0.8rem;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: #4a8;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid #1a1a1a;
            background: #0a0a0a;
            position: sticky;
            top: 58px;
            z-index: 99;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            color: #6a6560;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
            font-size: 0.95rem;
        }

        .tab:hover {
            color: #a09a92;
        }

        .tab.active {
            color: #c9b99a;
            border-bottom-color: #c9b99a;
        }

        .tab-badge {
            display: inline-block;
            background: #c9b99a;
            color: #0a0a0a;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 6px;
            font-family: -apple-system, sans-serif;
        }

        .tab-badge.warning {
            background: #c9a99a;
        }

        /* Tab Content */
        .tab-content {
            display: none;
            padding: 20px;
        }

        .tab-content.active {
            display: block;
        }

        /* Stats Row */
        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
            min-width: 80px;
        }

        .stat-number {
            font-size: 2rem;
            color: #c9b99a;
            margin-bottom: 3px;
        }

        .stat-label {
            color: #6a6560;
            font-size: 0.75rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }

        /* Section */
        .section {
            margin-bottom: 30px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        h2 {
            font-size: 1rem;
            font-weight: normal;
            color: #a09a92;
            letter-spacing: 0.05em;
        }

        /* List Items */
        .list {
            display: grid;
            gap: 8px;
        }

        .list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #111;
            border: 1px solid #1a1a1a;
        }

        .list-item.checked-out {
            opacity: 0.5;
        }

        .member-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .member-avatar {
            width: 36px;
            height: 36px;
            background: #1a1a1a;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6a6560;
            font-size: 0.8rem;
        }

        .member-name {
            font-size: 1rem;
            margin-bottom: 2px;
        }

        .member-meta {
            font-size: 0.8rem;
            color: #6a6560;
        }

        .item-right {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .time {
            color: #6a6560;
            font-size: 0.85rem;
        }

        .badge {
            display: inline-block;
            padding: 3px 8px;
            font-size: 0.7rem;
            letter-spacing: 0.05em;
        }

        .badge-guest {
            background: #2a2520;
            color: #c9b99a;
        }

        .badge-new {
            background: #1a2a1a;
            color: #9ac99a;
        }

        .badge-renew {
            background: #2a1a1a;
            color: #c99a9a;
        }

        /* Buttons */
        .btn {
            background: transparent;
            border: 1px solid #333;
            color: #6a6560;
            padding: 6px 12px;
            font-family: 'Playfair Display', Georgia, serif;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn:hover {
            border-color: #555;
            color: #a09a92;
        }

        .btn-small {
            padding: 4px 8px;
            font-size: 0.7rem;
        }

        .btn-clear {
            border-color: #333;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 0;
            color: #4a4a45;
            font-style: italic;
        }

        /* Check-In Tab Content */
        .checkin-container {
            max-width: 400px;
            margin: 0 auto;
            text-align: center;
        }

        .search-input {
            width: 100%;
            background: #111;
            border: 1px solid #2a2a2a;
            color: #e8e4df;
            font-size: 1.1rem;
            font-family: 'Playfair Display', Georgia, serif;
            padding: 15px;
            outline: none;
            margin-bottom: 20px;
        }

        .search-input::placeholder {
            color: #4a4a45;
        }

        .search-input:focus {
            border-color: #444;
        }

        .results {
            text-align: left;
        }

        .result-item {
            padding: 15px;
            background: #111;
            border: 1px solid #1a1a1a;
            margin-bottom: 8px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .result-item:hover {
            background: #1a1a1a;
        }

        .result-name {
            font-size: 1.05rem;
            margin-bottom: 4px;
        }

        .result-email {
            font-size: 0.8rem;
            color: #6a6560;
            font-family: monospace;
        }

        /* Member Modal - dark theme matching dashboard */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 200;
            padding: 20px;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: #0a0a0a;
            border: 1px solid #2a2a2a;
            padding: 40px 30px;
            max-width: 420px;
            width: 100%;
            text-align: center;
        }

        .modal-welcome {
            font-size: 1.2rem;
            font-weight: 400;
            color: #6a6560;
            margin-bottom: 15px;
            font-family: 'Playfair Display', Georgia, serif;
        }

        .modal-name {
            font-size: 1.8rem;
            color: #e8e4df;
            font-style: italic;
            margin-bottom: 25px;
            font-family: 'Playfair Display', Georgia, serif;
        }

        .modal-badge {
            display: inline-block;
            padding: 8px 20px;
            font-size: 0.75rem;
            letter-spacing: 0.12em;
            margin-bottom: 20px;
            font-family: 'Andale Mono', monospace;
            background: rgba(74, 106, 74, 0.2);
            color: #7a9a7a;
            border: 1px solid rgba(74, 106, 74, 0.4);
        }

        .modal-badge.expired {
            background: rgba(106, 74, 74, 0.2);
            color: #c99a9a;
            border: 1px solid rgba(106, 74, 74, 0.4);
        }

        .modal-expiry {
            color: #6a6560;
            font-size: 0.85rem;
            font-family: 'Andale Mono', monospace;
            margin-bottom: 10px;
        }

        .modal-guest-section {
            margin-top: 40px;
            padding-top: 25px;
            border-top: 1px solid #2a2a2a;
        }

        .modal-guest-prompt {
            color: #e8e4df;
            margin-bottom: 20px;
            font-size: 1rem;
            font-family: 'Playfair Display', Georgia, serif;
        }

        .modal-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: center;
        }

        .modal-btn {
            display: block;
            width: 100%;
            max-width: 280px;
            background: transparent;
            border: 1px solid #333;
            color: #e8e4df;
            padding: 15px;
            font-family: 'Playfair Display', Georgia, serif;
            font-size: 1rem;
            cursor: pointer;
            letter-spacing: 0.05em;
            transition: all 0.2s;
        }

        .modal-btn:hover {
            background: #1a1a1a;
        }

        .modal-btn.primary {
            background: #c9b99a;
            color: #0a0a0a;
            border-color: #c9b99a;
        }

        .modal-btn.primary:hover {
            background: #b9a98a;
        }

        .modal-btn-row {
            display: flex;
            gap: 15px;
            justify-content: center;
            width: 100%;
            max-width: 280px;
        }

        .modal-btn-row .modal-btn {
            flex: 1;
            max-width: none;
        }

        .modal-cancel {
            margin-top: 20px;
            color: #6a6560;
            font-size: 0.9rem;
            cursor: pointer;
            font-family: 'Playfair Display', Georgia, serif;
        }

        .modal-cancel:hover {
            color: #8a8580;
        }

        /* Expiring List */
        .expiring-item {
            background: #1a1512;
            border-color: #2a2015;
        }

        .expiring-date {
            color: #c9a99a;
            font-size: 0.85rem;
        }

        /* Admin Link */
        .admin-link {
            display: block;
            text-align: center;
            color: #4a4a45;
            font-size: 0.8rem;
            padding: 20px;
            text-decoration: none;
        }

        .admin-link:hover {
            color: #6a6560;
        }

        /* Success Toast */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: #1a2a1a;
            color: #9ac99a;
            padding: 15px 30px;
            border: 1px solid #2a3a2a;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .toast.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-left">
            <a href="https://visit-ops-production.up.railway.app" class="ops-back">← Ops</a>
            <div class="logo"><img src="Logo-Visit.png" alt="Visit"></div>
        </div>
        <div class="live-indicator">
            <div class="live-dot"></div>
            <span>Live</span>
        </div>
    </div>

    <div class="tabs">
        <div class="tab active" data-tab="dashboard">
            Dashboard
            <span class="tab-badge" id="checkin-badge" style="display:none">0</span>
        </div>
        <div class="tab" data-tab="renew">
            Renew
            <span class="tab-badge warning" id="renew-badge" style="display:none">0</span>
        </div>
        <div class="tab" data-tab="checkin">Check-In</div>
    </div>

    <!-- Dashboard Tab -->
    <div class="tab-content active" id="tab-dashboard">
        <div class="stats">
            <div class="stat">
                <div class="stat-number" id="stat-checkins">0</div>
                <div class="stat-label">Checked In</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="stat-guests">0</div>
                <div class="stat-label">Guests</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="stat-new">0</div>
                <div class="stat-label">New</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="stat-renew">0</div>
                <div class="stat-label">Want Renew</div>
            </div>
        </div>

        <div class="section">
            <div class="section-header">
                <h2>Checked in tonight</h2>
                <button class="btn btn-clear" onclick="clearAll()">Clear All</button>
            </div>
            <div class="list" id="checkin-list">
                <div class="empty-state">No one checked in yet</div>
            </div>
        </div>

        <div class="section">
            <h2>Expiring in 30 days</h2>
            <div class="list" id="expiring-list">
                <div class="empty-state">Loading...</div>
            </div>
        </div>

        <a href="/admin" class="admin-link">Admin Settings & History →</a>
    </div>

    <!-- Check-In Tab -->
    <div class="tab-content" id="tab-checkin">
        <div class="checkin-container">
            <input type="text" class="search-input" id="search-input" placeholder="Search by name..." autofocus>
            <div class="results" id="results"></div>
        </div>
    </div>

    <!-- Renew Tab -->
    <div class="tab-content" id="tab-renew">
        <div class="section">
            <h2>Members requesting renewal</h2>
            <div class="list" id="renew-list">
                <div class="empty-state">No renewal requests</div>
            </div>
        </div>
    </div>

    <!-- Member Modal -->
    <div class="modal" id="member-modal">
        <div class="modal-content">
            <div class="modal-welcome">Welcome back</div>
            <div class="modal-name" id="modal-name"></div>
            <div class="modal-badge" id="modal-badge">CLASSIC MEMBER</div>
            <div class="modal-expiry" id="modal-expiry"></div>
            <div class="modal-guest-section" id="modal-guest-section">
                <div class="modal-guest-prompt" id="modal-guest-prompt">Bringing guests tonight?</div>
                <div class="modal-buttons" id="modal-buttons"></div>
            </div>
            <div class="modal-cancel" onclick="closeModal()">That's not them</div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
        const API_BASE = '/api';
        let selectedMember = null;

        // Tab switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.dataset.tab;
                
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                tab.classList.add('active');
                document.getElementById('tab-' + tabId).classList.add('active');
                
                if (tabId === 'checkin') {
                    document.getElementById('search-input').focus();
                }
            });
        });

        // Utility functions
        function getInitials(name) {
            return name.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2);
        }

        function formatTime(timestamp) {
            return new Date(timestamp).toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
        }

        function formatDate(dateStr) {
            return new Date(dateStr).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        // Dashboard data
        async function fetchDashboard() {
            try {
                const [checkinsRes, signupsRes, renewRes] = await Promise.all([
                    fetch(`${API_BASE}/checkins`),
                    fetch(`${API_BASE}/signups`),
                    fetch(`${API_BASE}/renewal-requests`)
                ]);

                const checkins = (await checkinsRes.json()).checkins || [];
                const signups = (await signupsRes.json()).signups || [];
                const renewals = (await renewRes.json()).requests || [];

                // Update stats
                const stillHere = checkins.filter(c => !c.checkoutTime).length;
                const totalGuests = checkins.reduce((sum, c) => sum + (c.guestCount || 0), 0);
                
                document.getElementById('stat-checkins').textContent = stillHere;
                document.getElementById('stat-guests').textContent = totalGuests;
                document.getElementById('stat-new').textContent = signups.length;
                document.getElementById('stat-renew').textContent = renewals.length;

                // Update badges
                const checkinBadge = document.getElementById('checkin-badge');
                if (stillHere > 0) {
                    checkinBadge.textContent = stillHere;
                    checkinBadge.style.display = 'inline-block';
                } else {
                    checkinBadge.style.display = 'none';
                }

                const renewBadge = document.getElementById('renew-badge');
                if (renewals.length > 0) {
                    renewBadge.textContent = renewals.length;
                    renewBadge.style.display = 'inline-block';
                } else {
                    renewBadge.style.display = 'none';
                }

                // Render checkin list
                renderCheckins(checkins);
                renderRenewals(renewals);

            } catch (err) {
                console.error('Dashboard fetch error:', err);
            }
        }

        function renderCheckins(checkins) {
            const list = document.getElementById('checkin-list');
            
            if (checkins.length === 0) {
                list.innerHTML = '<div class="empty-state">No one checked in yet</div>';
                return;
            }

            const sorted = [...checkins].reverse();
            list.innerHTML = sorted.map(c => {
                let badges = '';
                if (c.guestCount === 1) badges += '<span class="badge badge-guest">+1 guest</span> ';
                else if (c.guestCount > 1) badges += `<span class="badge badge-guest">+${c.guestCount} guests</span> `;
                if (c.isNew) badges += '<span class="badge badge-new">new</span>';

                return `
                    <div class="list-item ${c.checkoutTime ? 'checked-out' : ''}">
                        <div class="member-info">
                            <div class="member-avatar">${getInitials(c.memberName)}</div>
                            <div>
                                <div class="member-name">${c.memberName} ${badges}</div>
                                <div class="member-meta">${c.memberEmail || ''}</div>
                            </div>
                        </div>
                        <div class="item-right">
                            <span class="time">${formatTime(c.timestamp)}</span>
                            ${c.checkoutTime 
                                ? `<span class="time">left ${formatTime(c.checkoutTime)}</span>`
                                : `<button class="btn btn-small" onclick="checkoutMember('${c.memberId}')">Out</button>`
                            }
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderRenewals(renewals) {
            const list = document.getElementById('renew-list');
            
            if (renewals.length === 0) {
                list.innerHTML = '<div class="empty-state">No renewal requests</div>';
                return;
            }

            list.innerHTML = renewals.map(r => `
                <div class="list-item">
                    <div class="member-info">
                        <div class="member-avatar">${getInitials(r.memberName)}</div>
                        <div>
                            <div class="member-name">${r.memberName}</div>
                            <div class="member-meta">Requested ${formatTime(r.timestamp)}</div>
                        </div>
                    </div>
                    <div class="item-right">
                        <button class="btn btn-small" onclick="clearRenewal('${r.memberId}')">Done</button>
                    </div>
                </div>
            `).join('');
        }

        async function fetchExpiring() {
            try {
                const res = await fetch(`${API_BASE}/expiring?days=30`);
                const data = await res.json();
                const list = document.getElementById('expiring-list');
                
                if (!data.expiring || data.expiring.length === 0) {
                    list.innerHTML = '<div class="empty-state">No memberships expiring soon</div>';
                    return;
                }

                list.innerHTML = data.expiring.map(m => `
                    <div class="list-item expiring-item">
                        <div class="member-name">${m.firstName} ${m.lastName}</div>
                        <div class="expiring-date">Expires ${formatDate(m.expiration)}</div>
                    </div>
                `).join('');
            } catch (err) {
                console.error('Expiring fetch error:', err);
            }
        }

        async function checkoutMember(memberId) {
            await fetch(`${API_BASE}/checkout`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ memberId })
            });
            fetchDashboard();
        }

        async function clearRenewal(memberId) {
            await fetch(`${API_BASE}/renewal-requests/clear/${memberId}`, { method: 'POST' });
            fetchDashboard();
            showToast('Renewal marked done');
        }

        async function clearAll() {
            if (!confirm('Clear all check-ins and signups for tonight?')) return;
            await fetch(`${API_BASE}/checkins/clear`, { method: 'POST' });
            fetchDashboard();
            showToast('Cleared');
        }

        // Search functionality
        const searchInput = document.getElementById('search-input');
        const resultsDiv = document.getElementById('results');
        let searchTimeout;

        searchInput.addEventListener('input', () => {
            clearTimeout(searchTimeout);
            const query = searchInput.value.trim();
            
            if (query.length < 2) {
                resultsDiv.innerHTML = '';
                return;
            }

            searchTimeout = setTimeout(() => searchMembers(query), 300);
        });

        async function searchMembers(query) {
            try {
                const res = await fetch(`${API_BASE}/search?q=${encodeURIComponent(query)}`);
                const data = await res.json();
                
                if (!data.members || data.members.length === 0) {
                    resultsDiv.innerHTML = '<div class="empty-state">No members found</div>';
                    return;
                }

                resultsDiv.innerHTML = data.members.map(m => `
                    <div class="result-item" onclick="selectMember('${m.id}', '${m.firstName}', '${m.lastName}', '${m.email || ''}')">
                        <div class="result-name">${m.firstName} ${m.lastName}</div>
                        <div class="result-email">${m.email || m.phone || ''}</div>
                    </div>
                `).join('');
            } catch (err) {
                resultsDiv.innerHTML = '<div class="empty-state">Search error</div>';
            }
        }

        async function selectMember(id, firstName, lastName, email) {
            // Fetch full member details
            try {
                const res = await fetch(`${API_BASE}/member/${id}`);
                const data = await res.json();
                
                if (data.member) {
                    selectedMember = data.member;
                } else {
                    selectedMember = { id, firstName, lastName, email };
                }
            } catch (err) {
                selectedMember = { id, firstName, lastName, email };
            }

            showMemberModal();
        }

        function showMemberModal() {
            const modal = document.getElementById('member-modal');
            const name = document.getElementById('modal-name');
            const badge = document.getElementById('modal-badge');
            const expiry = document.getElementById('modal-expiry');
            const guestSection = document.getElementById('modal-guest-section');
            const guestPrompt = document.getElementById('modal-guest-prompt');
            const buttons = document.getElementById('modal-buttons');

            name.textContent = `${selectedMember.firstName} ${selectedMember.lastName}`;

            const today = new Date();
            const expDate = selectedMember.expiration ? new Date(selectedMember.expiration) : null;
            const isExpired = expDate && expDate < today;
            const tier = selectedMember.tier || 'Classic';

            // Set badge
            badge.textContent = tier.toUpperCase() + ' MEMBER';
            badge.classList.toggle('expired', isExpired);
            
            // Set expiry
            if (isExpired) {
                badge.textContent = 'MEMBERSHIP EXPIRED';
                expiry.textContent = `Expired ${formatDate(selectedMember.expiration)}`;
                guestSection.style.display = 'none';
                buttons.innerHTML = '';
            } else {
                if (selectedMember.expiration) {
                    expiry.textContent = `Expires on ${formatDate(selectedMember.expiration)}`;
                } else {
                    expiry.textContent = '';
                }
                
                guestSection.style.display = 'block';
                
                if (tier === 'Enthusiast') {
                    guestPrompt.style.display = 'block';
                    guestPrompt.textContent = 'Bringing guests tonight?';
                    buttons.innerHTML = `
                        <button class="modal-btn primary" onclick="doCheckin(0)">Just me</button>
                        <div class="modal-btn-row">
                            <button class="modal-btn" onclick="doCheckin(1)">+1 Guest</button>
                            <button class="modal-btn" onclick="doCheckin(2)">+2 Guests</button>
                        </div>
                    `;
                } else {
                    guestPrompt.style.display = 'none';
                    buttons.innerHTML = `
                        <button class="modal-btn primary" onclick="doCheckin(0)">Check In</button>
                    `;
                }
            }

            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('member-modal').classList.remove('active');
            selectedMember = null;
        }

        async function doCheckin(guestCount) {
            try {
                await fetch(`${API_BASE}/checkin`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        memberId: selectedMember.id,
                        memberName: `${selectedMember.firstName} ${selectedMember.lastName}`,
                        memberEmail: selectedMember.email,
                        guestCount
                    })
                });

                closeModal();
                searchInput.value = '';
                resultsDiv.innerHTML = '';
                
                let msg = `${selectedMember.firstName} checked in`;
                if (guestCount > 0) msg += ` +${guestCount}`;
                showToast(msg);

                // Switch to dashboard and refresh
                document.querySelector('[data-tab="dashboard"]').click();
                fetchDashboard();

            } catch (err) {
                console.error('Checkin error:', err);
                showToast('Check-in failed');
            }
        }

        // Close modal on background click
        document.getElementById('member-modal').addEventListener('click', (e) => {
            if (e.target.id === 'member-modal') closeModal();
        });

        // Initial load
        fetchDashboard();
        fetchExpiring();

        // Poll for updates
        setInterval(fetchDashboard, 5000);
    </script>
</body>
</html>
